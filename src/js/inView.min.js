
!function(a){function b(){this.events=[]}function c(){var c=this;this.win=a(window),this.h=this.win.height(),this.vis=this.win.height()+this.win.scrollTop(),this.eventstack=new b,this.win.off("scroll.inview").on("scroll.inview",function(){c.checkPositions()}),this.timer=!1,window.onload=function(){c.win.scroll()}}function d(b,d){this.ele=b,this.ele.data().visible=!1,window.inviewController||(window.inviewController=new c),window.inviewController.eventstack.add(b.data().id,function(){b.offset().top+b.outerHeight()<window.inviewController.vis&&!b.data().visible&&(d.call(b),b.data().visible=!0,window.inviewController.eventstack.events[b.data().id]=function(){})}),a(window).scroll()}b.prototype={add:function(a,b){this.events[a]=b},run:function(){for(var a in this.events)this.events[a]()}},c.prototype={checkPositions:function(){var a=this,b=this.win.scrollTop();this.vis=this.h+b,a.eventstack.run()},setHeight:function(){this.h=this.win.height()}},a.fn.inView=function(b){var c=this.selector.replace(" ","");return this.each(function(e){var f=a(this);f.data().id=c+e,a(this).data({inview:new d(a(this),b)})})}}(jQuery);